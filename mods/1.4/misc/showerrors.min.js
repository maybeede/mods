/*!
 * showerrors.js for mods.js v1.4 | MIT License | (c) 2025 Maksim Postnikov
 * https://postnikovmd.com/mods/license
 */

window.t_showErrors=function(){if(!window.mods||!window.mods.errors||0===window.mods.errors.length)return;let e="https://static.postnikovmd.com/mods/"+window.mods.version+"/misc/showerrors.min.css",t=document.querySelector('link[href="'+e+'"]');t||(t=document.createElement("link"),t.rel="stylesheet",t.href=e,document.head.appendChild(t));let s,i=document.querySelector("error-container");fetch("https://static.postnikovmd.com/mods/"+window.mods.version+"/misc/errors.json").then((function(e){if(!e.ok)throw new Error("[mods.js] Ошибка: Не удалось загрузить errors.json");return e.json()})).then((function(e){window.mods.errors=window.mods.errors.map((function(t){let s=e.find((e=>e.mod===t.mod&&e.id===t.id));if(s){let{mod:e,id:i,...o}=s;return{...t,...o}}return t})),window.mods.errors.forEach((function(e){let t=e.type;function s(){let s=document.createElement("div");s.classList.add("error-modal","inactive");let o='<a class="container-area"></a><div class="container"><div class="header-icon"></div><div class="content"><div class="body"><div class="body-title"><div class="title">'+e.mod+'.js</div></div><div class="body-descr"><div class="descr">'+t+": "+e.message+"</div></div></div>";e.details&&(o+='<div class="tips"><div class="tips-title"><div class="subtitle">Как исправить?</div></div><div class="tips-descr"><div class="descr">'+e.details+"</div></div></div>"),o+='</div><div class="footer"><a class="button close-button"><div class="label">Понятно</div></a></div><a class="close-icon close-button"></a></div>',s.innerHTML=o,s.querySelector(".header-icon").classList.add(e.type),i||(i=document.createElement("div"),i.classList.add("error-container","inactive"),i.innerHTML='<div class="error-fade"></div>'),i.appendChild(s)}"error"===t?(t="Ошибка",s()):"warn"===t&&(t="Предупреждение",setTimeout(s))})),setTimeout((function(){document.body.appendChild(i);window.addEventListener("resize",(function(){clearTimeout(s),s=setTimeout((function(){window.rescale&&window.rescale.this||void 0!==window.tn_scale_factor&&1!==window.tn_scale_factor&&i.style.setProperty("--scale-factor",window.tn_scale_factor)}),500)}));let e=i.querySelectorAll(".error-modal");e.length>0&&setTimeout((function(){i.classList.remove("inactive"),i.classList.add("active"),e[0].classList.remove("inactive"),e[0].classList.add("active"),document.body.classList.add("t-mods_popupshowed")}),10);let t=e.length;e.forEach((function(s,o){s.querySelectorAll(".close-button, .container-area").forEach((d=>{d.addEventListener("click",(function(){s.classList.remove("active"),s.classList.add("inactive"),t-=1,o+1<e.length&&(e[o+1].classList.remove("inactive"),e[o+1].classList.add("active")),setTimeout((function(){t<=0&&(i.classList.remove("active"),i.classList.add("inactive"),setTimeout((function(){i.remove(),document.body.classList.remove("t-mods_popupshowed")}),300))}),300)}))}))}))}))}))},t_onReady((function(){let e=!1,t=function(){e||(setTimeout((function(){t_showErrors()}),1e3),e=!0)};"complete"===document.readyState?t():window.addEventListener("load",(function(){t()}))}));
