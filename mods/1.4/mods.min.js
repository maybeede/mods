(function(){
  window.mods = window.mods || {version:"1.4"};
  console.log("mods.js loaded with fixed sync config");

  // Fixed config (slider, forms, popup, preloader, header made sync)
  window.mods.config = {
    rescale:{init:{method:"init",async:false},block:{method:"block"},disable:{method:"disable",async:false}},
    header:{init:{method:"init",css:true,async:false}},
    subheader:{init:{depends:"header",method:"init"}},
    submenu:{init:{depends:"header",method:"init"}},
    menu:{init:{depends:"header",method:"init"}},
    search:{init:{depends:"header",method:"init"}},
    slider:{init:{method:"init",css:true,async:false}},
    tabs:{init:{method:"init",css:true}},
    popup:{init:{method:"init",css:true,async:false}},
    forms:{init:{method:"init",async:false},success:{method:"success"},validate:{method:"validate"}},
    accordion:{init:{method:"init",css:true}},
    video:{init:{method:"init",css:true}},
    audio:{init:{method:"init",css:true}},
    preloader:{init:{method:"init",async:false,css:true}},
    tooltip:{init:{method:"init",css:true}},
    lottie:{init:{method:"init"}},
    truncate:{init:{method:"init"}},
    buttons:{init:{method:"init",css:true}},
    back:{init:{method:"init"}},
    flip:{init:{method:"init",css:true}},
    tilt:{init:{method:"init"}},
    textsplit:{init:{method:"init",css:true}},
    numbers:{init:{method:"init"}}
  };
})();
{
  void 0===window.mods&&(window.mods={
    version:"1.4",
  });

  let d=new URLSearchParams(window.location.search);

  // debug
  if(null!==d.get("debug")){
    if(void 0===window.mods.debug)
      return null!==d.get("v")&&(window.mods.version=d.get("v")),
      document.write('<script src="https://cdn.jsdelivr.net/gh/maybeede/mods/mods/'+window.mods.version+'/mods.min.js"><\/script>'),
      void(window.mods.debug=!0);
    null!==d.get("v")&&(window.mods.version=d.get("v"))
  }

  // showerrors
  if(null!==d.get("showerrors")){
    let e=document.createElement("script");
    e.src="https://cdn.jsdelivr.net/gh/maybeede/mods/mods/"+window.mods.version+"/misc/showerrors.min.js",
    e.async=!0,
    document.head.appendChild(e)
  }

  // showparams
  if(null!==d.get("showparams")){
    let e=document.createElement("script");
    e.src="https://cdn.jsdelivr.net/gh/maybeede/mods/mods/"+window.mods.version+"/misc/showparams.min.js",
    e.async=!0,
    document.head.appendChild(e)
  }

  let n=function(e,d,...n){
    d||(d={}),
    d.method||(d.method="init"),
    void 0===d.js&&(d.js=!0),
    void 0===d.css&&(d.css=!1),
    void 0!==d.depends?(d.mod=e,e=d.depends):d.mod=e,
    void 0===d.async&&(d.async=!0),
    void 0===d.handler&&(d.handler=!0);

    let o="https://cdn.jsdelivr.net/gh/maybeede/mods/tilda@"+window.mods.version+"/"+e+".min";
    window.mods.debug&&(o="https://cdn.jsdelivr.net/gh/maybeede/mods/mods/"+window.mods.version+"/"+e+".min");

    let i=function(e,d,n){
      let o;
      o=d.object?window[d.object]:window[e],
      o&&"function"==typeof o[d.method]&&o[d.method](...n)
    },
    t=function(e){
      switch(e){
        case"rescale":{
          let e=document.querySelector('script[src*="tilda-animation-2.0.min.js"]');
          e&&(e.remove(),"init"===window.rescale.state?setTimeout((function(){document.head.appendChild(e)}),10):window.addEventListener("rescaleinit",(function(){setTimeout((function(){document.head.appendChild(e)}),10)}))),
          "block"===d.method&&(void 0===window.rescale&&(window.rescale={}),window.rescale.trigger="block"),
          "disable"===d.method&&(void 0===window.rescale&&(window.rescale={}),window.rescale.disabled="init");
          break
        }
        case"header":
          if("string"==typeof n[0]&&document.querySelector(n[0]).classList.add("t-header-loading","t-header-locked"),
          !document.querySelector(".t-header-style")){
            let e=document.createElement("style");
            e.classList.add("t-header-style"),
            e.textContent=".t-header-loading { visibility: hidden!important; transition: none!important; opacity: 0!important } .t-header-locked { transition: none !important }",
            document.head.appendChild(e)
          }
      }
    };

    if(window.mods.mods.loaded.sync.has(e)||window.mods.mods.loaded.async.has(e))
      i(d.mod,d,n),t(e);
    else if(void 0===window[e].loaded&&(window[e].loaded=!1),window[e].loaded){
      document.querySelector('script[src="'+o+'.js"]').addEventListener("load",(function(){i(d.mod,d,n)})),t(e)
    } else {
      if(d.js){
        let t=document.createElement("script");
        t.src=o+".js",
        d.async&&(t.async=!0),
        t.onload=function(){
          window[e].loaded=!0,
          d.async?window.mods.mods.loaded.async.add(e):window.mods.mods.loaded.sync.add(e),
          window.dispatchEvent(new Event("modLoaded")),
          i(d.mod,d,n)
        },
        document.head.appendChild(t)
      }
      if(d.css){
        let e=document.createElement("link");
        e.rel="stylesheet",e.href=o+".css",document.head.appendChild(e)
      }
      d.handler&&t(e),window[e].loaded=!0
    }
  };

}(window);
